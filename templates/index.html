<!DOCTYPE html>
<html lang="en" data-theme="retro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Data Analysis</title>

    <!-- TailwindCSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.9.0/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Add Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.js"></script>
  </head>

  <body>
    <!-- Surface Pressure Chart -->
    <div id="surfacePressureChart">
      <canvas id="pressureChart"></canvas>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Fetch data from SQL table
        Promise.all([
          fetch("/api/weather-data/chennai").then((response) =>
            response.json()
          ),
          fetch("/api/weather-data/madurai").then((response) =>
            response.json()
          ),
        ])
          .then(([chennaiData, maduraiData]) => {
            const chartData = {
              labels: chennaiData.labels,
              datasets: [
                {
                  label: "Chennai Surface Pressure",
                  data: chennaiData.surfacePressure,
                  backgroundColor: "rgba(255, 99, 132, 0.2)",
                  borderColor: "rgba(255, 99, 132, 1)",
                  borderWidth: 1,
                },
                {
                  label: "Madurai Surface Pressure",
                  data: maduraiData.surfacePressure,
                  backgroundColor: "rgba(54, 162, 235, 0.2)",
                  borderColor: "rgba(54, 162, 235, 1)",
                  borderWidth: 1,
                },
              ],
            };

            const ctx = document
              .getElementById("pressureChart")
              .getContext("2d");

            new Chart(ctx, {
              type: "line",
              data: chartData,
              options: {
                responsive: true,
                title: {
                  display: true,
                  text: "Surface Pressure",
                },
              },
            });
          })
          .catch((error) => {
            console.error("Error fetching weather data:", error);
          });
      });
    </script>

    <!-- Relative Humidity Chart -->
    <div id="relativeHumidityChart">
      <canvas id="humidityChart"></canvas>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Fetch data from SQL table
        Promise.all([
          fetch("/api/weather-data/chennai").then((response) =>
            response.json()
          ),
          fetch("/api/weather-data/madurai").then((response) =>
            response.json()
          ),
        ])
          .then(([chennaiData, maduraiData]) => {
            const chartData = {
              labels: chennaiData.labels,
              datasets: [
                {
                  label: "Chennai Relative Humidity",
                  data: chennaiData.relativeHumidity,
                  backgroundColor: "rgba(255, 99, 132, 0.2)",
                  borderColor: "rgba(255, 99, 132, 1)",
                  borderWidth: 1,
                },
                {
                  label: "Madurai Relative Humidity",
                  data: maduraiData.relativeHumidity,
                  backgroundColor: "rgba(54, 162, 235, 0.2)",
                  borderColor: "rgba(54, 162, 235, 1)",
                  borderWidth: 1,
                },
              ],
            };

            const ctx = document
              .getElementById("humidityChart")
              .getContext("2d");

            new Chart(ctx, {
              type: "line",
              data: chartData,
              options: {
                responsive: true,
                title: {
                  display: true,
                  text: "Relative Humidity",
                },
              },
            });
          })
          .catch((error) => {
            console.error("Error fetching weather data:", error);
          });
      });
    </script>

    <!-- Wind Speed Chart -->
    <div id="windSpeedChart">
      <canvas id="windChart"></canvas>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Fetch data from SQL table
        Promise.all([
          fetch("/api/weather-data/chennai").then((response) =>
            response.json()
          ),
          fetch("/api/weather-data/madurai").then((response) =>
            response.json()
          ),
        ])
          .then(([chennaiData, maduraiData]) => {
            const chartData = {
              labels: chennaiData.labels,
              datasets: [
                {
                  label: "Chennai Wind Speed",
                  data: chennaiData.windSpeed,
                  backgroundColor: "rgba(255, 99, 132, 0.2)",
                  borderColor: "rgba(255, 99, 132, 1)",
                  borderWidth: 1,
                },
                {
                  label: "Madurai Wind Speed",
                  data: maduraiData.windSpeed,
                  backgroundColor: "rgba(54, 162, 235, 0.2)",
                  borderColor: "rgba(54, 162, 235, 1)",
                  borderWidth: 1,
                },
              ],
            };

            const ctx = document
              .getElementById("windChart")
              .getContext("2d");

            new Chart(ctx, {
              type: "line",
              data: chartData,
              options: {
                responsive: true,
                title: {
                  display: true,
                  text: "Wind Speed",
                },
              },
            });
          })
          .catch((error) => {
            console.error("Error fetching weather data:", error);
          });
      });
    </script>
  </body>
</html>